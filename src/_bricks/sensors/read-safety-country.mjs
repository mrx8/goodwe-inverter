import Factory from 'stampit'
import GetStamp from '../../shared/get-stamp.mjs'
import ReadUInt16BE from './read-uint16be.mjs'


export default Factory
  .compose(
    GetStamp,
    ReadUInt16BE,
  )

  .configuration({
    SAFETY_COUNTRIES: {
      0  : 'IT CEI 0-21',
      1  : 'CZ-A1',
      2  : 'DE LV with PV',
      3  : 'ES-A',
      4  : 'GR',
      5  : 'DK2',
      6  : 'BE',
      7  : 'RO-A',
      8  : 'GB G98',
      9  : 'Australia A',
      10 : 'FR mainland',
      11 : 'China',
      12 : '60Hz 230Vac Default',
      13 : 'PL LV',
      14 : 'South Africa',
      16 : 'Brazil 220Vac',
      17 : 'Thailand MEA',
      18 : 'Thailand PEA',
      19 : 'Mauritius',
      20 : 'NL-A',
      21 : 'G98/NI',
      22 : 'China Higher',
      23 : 'FR island 50Hz',
      24 : 'FR island 60Hz',
      25 : 'Australia Ergon',
      26 : 'Australia Energex',
      27 : 'NL 16/20A',
      28 : 'Korea',
      29 : 'China Utility',
      30 : 'AT-A',
      31 : 'India',
      32 : '50Hz 230Vac Default',
      33 : 'Warehouse',
      34 : 'Philippines',
      35 : 'IE-16/25A',
      36 : 'Taiwan',
      37 : 'BG',
      38 : 'Barbados',
      39 : 'China Highest',
      40 : 'GB G99-A',
      41 : 'SE LV',
      42 : 'Chile BT',
      43 : 'Brazil 127Vac',
      44 : 'Newzealand',
      45 : 'IEEE1547 208Vac',
      46 : 'IEEE1547 220Vac',
      47 : 'IEEE1547 240Vac',
      48 : '60Hz 127Vac Default',
      49 : '50Hz 127Vac Default',
      50 : 'Australia WAPN',
      51 : 'Australia MicroGrid',
      52 : 'JP 50Hz',
      53 : 'JP 60Hz',
      54 : 'India Higher',
      55 : 'DEWA LV',
      56 : 'DEWA MV',
      57 : 'SK',
      58 : 'NZ GreenGrid',
      59 : 'HU',
      60 : 'Sri Lanka',
      61 : 'ES island',
      62 : 'Ergon30K',
      63 : 'Energex30K',
      64 : 'IEEE1547 230/400Vac',
      65 : 'IEC61727 60Hz',
      66 : 'CH',
      67 : 'IT CEI 0-16',
      68 : 'Australia Horizon',
      69 : 'CY',
      70 : 'Australia SAPN',
      71 : 'Australia Ausgrid',
      72 : 'Australia Essential',
      73 : 'Australia Victoria',
      74 : 'Hong Kong',
      75 : 'PL MV',
      76 : 'NL-B',
      77 : 'SE MV',
      78 : 'DE MV',
      79 : 'DE LV without PV',
      80 : 'ES-D',
      81 : 'Australia Endeavour',
      82 : 'Argentina',
      83 : 'Israel LV',
      84 : 'IEC61727 50Hz',
      85 : 'Australia B',
      86 : 'Australia C',
      87 : 'Chile MT-A',
      88 : 'Chile MT-B',
      89 : 'Vietnam',
      90 : 'reserve14',
      91 : 'Israel-HV',
      93 : 'NewZealand:2015',
      94 : 'RO-D',
      96 : 'US 208Vac Default',
      97 : 'US 240Vac Default',
      98 : 'US CA 208Vac',
      99 : 'US CA 240Vac',
      100: 'cUSA_208VacCA_SDGE',
      101: 'cUSA_240VacCA_SDGE',
      102: 'cUSA_208VacCA_PGE',
      103: 'cUSA_240VacCA_PGE',
      104: 'US HI 208Vac',
      105: 'US HI 240Vac',
      106: 'USA_208VacHECO_14HM',
      107: 'USA_240VacHECO_14HM',
      108: 'US 480Vac',
      109: 'US CA 480Vac',
      110: 'US HI 480Vac',
      111: 'US Kauai 208Vac',
      112: 'US Kauai 240Vac',
      113: 'US Kauai 480Vac',
      114: 'US ISO-NE 208Vac',
      115: 'US ISO-NE 240Vac',
      116: 'US ISO-NE 480Vac',
      118: 'PR 208Vac',
      119: 'PR 240Vac',
      120: 'PR 480Vac',
      128: 'Poland_B',
      129: 'EE',
      135: 'CZ-A2',
      136: 'CZ-B1',
      146: 'Brazil 208Vac',
      147: 'Brazil 230Vac',
      148: 'Brazil 240Vac',
      149: 'Brazil 254Vac',
    },

  })

  .methods({
    readSafetyCountryCode (register) {
      return this.readUInt16BE(register)
    },

    readSafetyCountry (register) {
      const value = this.readSafetyCountryCode(register)

      return this.getStampConfiguration().SAFETY_COUNTRIES[value] || 'unknown'
    },
  })
